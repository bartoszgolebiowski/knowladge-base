# SAM

# AWS Serverless Application Model (SAM) - Solution Architect Professional Notes

## Core Concepts

- **Framework for Serverless Applications:** Simplifies the development and deployment of serverless applications on AWS.
- **YAML-based Syntax:** Defines serverless resources (Lambda functions, DynamoDB tables, API Gateways, Step Functions) using concise YAML templates.
- **Local Development:** Provides capabilities to run Lambda functions, API Gateway, and DynamoDB locally for easier testing and development.
- **Leverages CodeDeploy for Lambda Deployments:** When deploying new versions of Lambda functions, SAM integrates with AWS CodeDeploy to perform traffic shifting.
- **Backend Powered by CloudFormation:** SAM templates are transformed into CloudFormation templates for actual resource provisioning.

## Key Resources Defined by SAM

- Lambda Functions
- DynamoDB Tables
- API Gateway APIs
- Step Functions State Machines

## CI/CD Architecture for SAM

- **Orchestration:** AWS CodePipeline is typically used to orchestrate the CI/CD process.
- **Code Repository:** AWS CodeCommit is commonly used for storing the application code and SAM templates.
- **Build and Package:** AWS CodeBuild is used to build, test, and package the serverless application.
- **Deployment:** A CloudFormation step in CodePipeline is used to deploy the application.
    - **SAM Transformation:** During this step, SAM processes the SAM template and transforms it into a standard CloudFormation template.
    - **Resource Provisioning:** CloudFormation then provisions the resources defined in the transformed template (Lambda functions, API Gateway, DynamoDB, etc.).
    - **Lambda Deployment with CodeDeploy:** **Crucially, when SAM deploys a Lambda function, it automatically invokes AWS CodeDeploy in the backend to perform traffic shifting between different Lambda function versions.** This leverages the traffic shifting feature of Lambda aliases.
- **API Gateway and DynamoDB Updates:** Standard CloudFormation mechanisms handle the deployment and updates for API Gateway and DynamoDB resources defined in the SAM template.

## Key Takeaway for the Exam

- Understand that SAM simplifies serverless development and deployment using YAML.
- Recognize that SAM leverages AWS CodeDeploy **specifically for Lambda function deployments** to enable traffic shifting for safer and controlled rollouts of new versions.
- Know that SAM ultimately relies on CloudFormation for provisioning all the defined serverless resources.
- Be aware of a typical CI/CD pipeline for SAM applications involving CodeCommit, CodeBuild, and CodePipeline with a CloudFormation deployment stage.

In essence, SAM streamlines the serverless experience, and its automatic integration with CodeDeploy for Lambda traffic shifting is a significant feature to remember for the AWS Solutions Architect Professional exam.