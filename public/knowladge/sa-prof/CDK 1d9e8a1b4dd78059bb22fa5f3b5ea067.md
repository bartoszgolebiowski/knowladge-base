# CDK

# AWS Cloud Development Kit (CDK) - Solution Architect Professional Notes

## Core Concept

- **Infrastructure as Code with Programming Languages:** Allows defining AWS cloud infrastructure using familiar programming languages instead of YAML or JSON (like CloudFormation).
- **Supported Languages:** JavaScript, TypeScript, Python, Java, .NET, and Go.
- **Compilation to CloudFormation:** CDK code is compiled into standard CloudFormation templates (in JSON or YAML format) using the CDK CLI.
- **Unified Deployment:** Enables deploying infrastructure and application runtime code together, especially beneficial for Lambda functions and containerized applications (ECS, EKS) that might share the same programming language.

## Workflow Example (using Python)

1. **Write CDK Application:** Develop your cloud infrastructure definition using Python, defining resources like Lambda functions, DynamoDB tables, and other AWS services using CDK constructs.
2. **CDK CLI Transformation:** Use the AWS CDK Command Line Interface (CLI) to transpile your Python CDK application into one or more CloudFormation templates.
3. **CloudFormation Deployment:** The generated CloudFormation template(s) can then be deployed using the standard CloudFormation service, provisioning the defined AWS infrastructure.

## Benefits of Using CDK

- **Type Safety:** Programming languages offer type checking, reducing the risk of configuration errors compared to schema-less YAML.
- **Familiar Constructs:** Leverage familiar programming concepts like variables, functions, loops, and object-oriented programming for infrastructure definition.
- **Increased Development Speed:** Potentially faster development due to language familiarity and the ability to reuse code and create abstractions.
- **Code Reusability:** Create reusable infrastructure components and patterns using programming language features.
- **Abstraction and Higher-Level Constructs:** CDK provides higher-level abstractions over raw CloudFormation resources, simplifying common infrastructure patterns.

## Example CDK Code (JavaScript/TypeScript)

```tsx
import * as ec2 from 'aws-cdk-lib/aws-ec2';
import * as ecs from 'aws-cdk-lib/aws-ecs';
import * as elbv2 from 'aws-cdk-lib/aws-elasticloadbalancingv2';
import * as cdk from 'aws-cdk-lib';

const vpc = new ec2.Vpc(this, 'MyVpc');

const cluster = new ecs.Cluster(this, 'MyCluster', {
  vpc: vpc,
});

const service = new ecs.FargateService(this, 'MyFargateService', {
  cluster: cluster,
  taskDefinition: new ecs.FargateTaskDefinition(this, 'MyTaskDefinition'),
});

const lb = new elbv2.ApplicationLoadBalancer(this, 'MyAlb', {
  vpc: vpc,
  internetFacing: true,
});

lb.addListener('Listener', {
  port: 80,
  defaultAction: [ecs.ListenerAction.forward([service.loadBalancerTargetGroup])],
});
```